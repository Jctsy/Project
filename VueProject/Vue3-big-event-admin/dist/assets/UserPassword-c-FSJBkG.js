import{_ as V}from"./PageContainer-Br4saTU9.js";import{r as m,u as S,c as k,a as l,o as y,b as r,f as _,h as U,b$ as F,E as x}from"./index-BTaUx_ka.js";import{E as C,a as N}from"./el-col-DnJcuiee.js";import{E as R,a as $}from"./el-form-item-0DcbqqIX.js";import{E as q}from"./_plugin-vue_export-helper-CWM11JDE.js";import{E as B}from"./el-input-DWvfFRaU.js";import"./_baseClone-BHJ8xOhp.js";const H={__name:"UserPassword",setup(I){const u=m(),o=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,t)=>{e===o.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,t)=>{e!==o.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},n=S(),w=U(),f=async()=>{await u.value.validate(),await F(o.value),x.success("密码修改成功"),n.setToken(""),n.setUser({}),w.push("/login")},c=()=>{u.value.resetFields()};return(d,e)=>{const t=B,s=R,p=q,g=$,v=C,b=N,E=V;return y(),k(E,{title:"修改密码"},{default:l(()=>[r(b,null,{default:l(()=>[r(v,{span:12},{default:l(()=>[r(g,{model:o.value,rules:i,ref_key:"formRef",ref:u,"label-width":"100px",size:"large"},{default:l(()=>[r(s,{label:"原密码",prop:"old_pwd"},{default:l(()=>[r(t,{modelValue:o.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,{label:"新密码",prop:"new_pwd"},{default:l(()=>[r(t,{modelValue:o.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,{label:"确认新密码",prop:"re_pwd"},{default:l(()=>[r(t,{modelValue:o.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,null,{default:l(()=>[r(p,{onClick:f,type:"primary"},{default:l(()=>e[3]||(e[3]=[_("修改密码")])),_:1}),r(p,{onClick:c},{default:l(()=>e[4]||(e[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
