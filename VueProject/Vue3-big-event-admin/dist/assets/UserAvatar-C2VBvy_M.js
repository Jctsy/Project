import{_ as U}from"./PageContainer-BHrjUJTy.js";import{u as y,r as p,c as i,a as o,o as s,b as t,x as E,e as l,d as w,f as _,bO as x,E as A,A as b,aR as d,bP as B}from"./index-C8ybJ9Eg.js";import{_ as R,E as S}from"./_plugin-vue_export-helper-BegnIwYg.js";import{E as C}from"./el-progress-DU8qjDOJ.js";import"./_baseClone-a3CAQbi1.js";import"./isEqual-lsOxyDNa.js";const N=["src"],V={__name:"UserAvatar",setup(z){const r=y(),a=p(r.user.user_pic),n=p(),f=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{a.value=e.result,console.log(a.value)}},m=async()=>{await x(a.value),await r.getUser(),A.success("头像更新成功")};return(c,e)=>{const v=b,g=C,u=S,k=U;return s(),i(k,{title:"更换头像"},{default:o(()=>[t(g,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":f},{default:o(()=>[a.value?(s(),E("img",{key:0,src:a.value,class:"avatar"},null,8,N)):(s(),i(v,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[t(l(d))]),_:1}))]),_:1},512),e[3]||(e[3]=w("br",null,null,-1)),t(u,{onClick:e[0]||(e[0]=F=>n.value.$el.querySelector("input").click()),type:"primary",icon:l(d),size:"large"},{default:o(()=>e[1]||(e[1]=[_("选择图片")])),_:1},8,["icon"]),t(u,{onClick:m,type:"success",icon:l(B),size:"large"},{default:o(()=>e[2]||(e[2]=[_("上传头像")])),_:1},8,["icon"])]),_:1})}}},O=R(V,[["__scopeId","data-v-7cf3518a"]]);export{O as default};
